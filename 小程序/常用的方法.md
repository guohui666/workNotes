### 1. 获取页面实例
```javascript
  // 通过获取页面实列可以操作其他页面的方法，通常用于同步上一页数据
    
  let pages = getCurrentPages();             //  获取页面栈
  let prevPage = pages[pages.length - 2];    // 上一个页面
  
  prevPage.setData({
       a:1,
       b:2
  })
```
### 2. 封装全局http方法
```javascript
let basePath = 'https://xxxxxx.com'

const defaultOp = {
    url: '',
    data: {},
    header: {
        'Content-Type': 'application/json'
    },
    method: 'GET',
    dataType: 'json'
}

export function request(opt) {
  let options = Object.assign({}, defaultOp, opt)
  let {
      url,
      data,
      header,
      method,
      dataType
  } = options
  // header添加token
  try {
      header.token = getApp().globalData.token
      if (!header.token) {
          header.token = wx.getStorageSync('token')
      }
  } catch (e) {
      header.token = ''
  }
  return new Promise((resolve, reject) => {
      wx.request({
          url: basePath + url,
          data: data,
          header: header,
          method: method,
          dataType: dataType,
          success: function (res) {
              let result = res.data || {}
              if (res.statusCode === 200) {
                resolve(result)
              } else if (res.statusCode === 401) {
                  result = Object.assign({}, result, { msg: '登录失效' })
                  reject(result)
              } else {
                  result = Object.assign({}, result, { msg: `服务器错误${res.statusCode}` })
                  reject(result)
              }
          },
          fail: function (err) {
              reject(err)
          }
      })
  })
}

```